package com.whj.photovideopicker.view;import android.content.Context;import android.content.res.Resources;import android.util.AttributeSet;import android.util.DisplayMetrics;import com.facebook.drawee.generic.GenericDraweeHierarchy;import com.facebook.drawee.view.SimpleDraweeView;import com.whj.photovideopicker.utils.PickerUtils;/** * author : William * github : WHuaJian * date   : 2019-10-1713:35 * desc   : * @author weihuajian */public class GridImageView extends SimpleDraweeView {        public GridImageView(Context context, GenericDraweeHierarchy hierarchy) {        super(context, hierarchy);    }    public GridImageView(Context context) {        super(context);    }    public GridImageView(Context context, AttributeSet attrs) {        super(context, attrs);    }    @Override    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {        super.onMeasure(widthMeasureSpec, heightMeasureSpec);        int spanNumber = PickerUtils.getSpanNumber(getContext());        int finalWidth = (getDisplayWidth()-PickerUtils.sp2px(getContext(),5)*(spanNumber-1)) / spanNumber;        setMeasuredDimension(finalWidth,finalWidth);    }    @Override    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {        super.onLayout(changed, left, top, right, bottom);    }    private int getDisplayWidth(){        Resources resources = this.getResources();        DisplayMetrics dm = resources.getDisplayMetrics();        int width = dm.widthPixels;        return  width;    }}